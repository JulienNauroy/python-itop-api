#!/usr/bin/env python
# -*- coding: utf8 -*-fr
# pylint: disable=invalid-name
"""
itop-cli is a basic CLI interface for iTop REST interface
"""

__version__ = '1.0'
__authors__ = ['Guillaume Philippon <guillaume.philippon@lal.in2p3.fr>']

from itopapi import ItopapiController, ItopapiConfig
from itopcli import load_configuration_cli, ItopcliConfig


def main():
    """
    Main function
    """
    ######################
    # Load configuration #
    ######################
    load_configuration_cli()

    ####################
    # Some value check #
    ####################
    if ItopapiConfig.hostname is None \
            or ItopapiConfig.username is None\
            or ItopapiConfig.password is None:
        print "Hostname/Username/Password missing"
        exit(1)

    #####################################
    # Retrieve quattor profile if asked #
    #####################################
    if ItopapiConfig.quattor_profile is not None:
        quattor_controller = ItopapiController()
        quattor_controller.load_from_quattor(ItopapiConfig.quattor_profile)
        quattor_controller.display()

    #########################
    # Display classes asked #
    #########################
    if ItopcliConfig.classes is not None:
        for itop_class in ItopcliConfig.classes:
            class_controller = ItopapiController()
            class_controller.load_from_model(itop_class)
            class_controller.display()

if __name__ == "__main__":
    main()
